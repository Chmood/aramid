/******************************************************************************
 * DEMO - NAVBAR
 ******************************************************************************/

////////////////////////////////////////////////////////////////////////////////
// CONFIGURATION

$navbar-height:             2;  // in $gutter unit
$navbar-height-tablet:      3;
$navbar-height-desktop:     4;

$navbar-fontsize:           'bigger';
$is-header-sticky:          true;


////////////////////////////////////////////////////////////////////////////////
// CLASSES

/* TOOLZ */

// Mobile main nav is hidden by default
.is-collapsed { display: none; }



/* NAV */

.nav {

/* NAV ITEM STYLING */

  > * {
    text-transform: uppercase;

    &.nav__item--active {
      font-weight: bold;
    }
  }
}


/* NAVBAR */

.navbar {

  // navbars are grids, with fitted cells
  @extend %grid;
  @extend %grid--fit;

  /* filler */

  // the filler splits left and right parts of navbar
  // it's a bloat tag, and it flex fills as much space as needed
  > .navbar__filler {
    @extend %cell--fill;
  }

  /* NAV IN NAVBAR */

  .nav {

    /* Nav items */

    > * {  //background-color: rgba(255,0,0,0.125);
      color: $color-gray;
      &:hover { color: $color-secondary; }

      @media screen and (min-width: bp('s')) {
        @include v-rhythm(
          fontsize($navbar-fontsize),
          $baseline-mode: false,
          $lines: $navbar-height-tablet
        );
        margin-bottom: 0;
      };

      @media screen and (min-width: bp('m')) {
        @include v-rhythm(
          fontsize($navbar-fontsize),
          $baseline-mode: false,
          $lines: $navbar-height-desktop
        );
        margin-bottom: 0;
        line-height: $navbar-height-desktop * $gutter !important;
      }

      @media screen and (min-width: bp('l')) {
        @include v-rhythm(
          fontsize($navbar-fontsize),
          $baseline-mode: false,
          $lines: $navbar-height-desktop
        );
        margin-bottom: 0;
        line-height: $navbar-height-desktop * $gutter !important;
      }


      /* Active item */

      &.nav__item--active {
        color: $color-gray-lighter;

        /* active item extra styling */
        box-shadow: -$gutter-quarter 0 0 0 currentColor;
        @media screen and (min-width: bp($bp-menu-display)) {
          box-shadow: inset 0 (-$gutter-quarter) 0 0 currentColor;
        };
      }
    }

    /* MAIN NAV */

    &.nav-main {//background-color: teal;
      // width: 100vw;
      width: calc(100% + 2 * 2.4rem);

      margin-left: -$gutter;
      margin-right: -$gutter;

      padding-left: $gutter-half;
      padding-right: $gutter-half;

      background: $color-gray-darkest;
      order: 1000;  // force main nav to be the last item of navbar

      // vertical padding
      padding-top: $gutter;
      padding-bottom: $gutter;

      > * {
        // Makes all items full-width by default
        @extend %cell--full;

        //
        @include v-rhythm(
          fontsize($navbar-fontsize),
          $baseline-mode: false,
          $lines: $navbar-height-tablet
        );
        margin-bottom: 0;
        margin-right: 0;
      }

      @media screen and (min-width: bp($bp-menu-display)) {
        width: auto;

        padding-top: 0;
        padding-bottom: 0;

        margin-left: 0;
        margin-right: 0;

        background: transparent;
        order: initial;

        &, &.is-collapsed { display: flex; }

        > * {
          flex: none; // @extend .cell--fit bugs me here
        }
      }
    }


    /* MOBILE NAV */

    &.nav-mobile {

      > * {
        margin-right: 0;
        flex: none;

        a, button {
          color: $color-gray;

          &:hover {
            color: $color-gray-lighter;
          }
        }
      }

      /* Hamburger */

      > button.hamburger {

        color: $color-secondary;
        &:hover { color: $color-secondary-light; }

        @media screen and (min-width: bp($bp-menu-display)) {
          display: none;
        };
      }
    }

  }  // end .nav
}  // end .navbar


////////////////////////////////////////////////////////////////////////////////
// STICKY HEADER

/* STICKY HEADER */

@if $is-header-sticky {

  /* Sticky header */

  .wrap--header {
    position: fixed;
    width: 100%;
    z-index: 500;
    @include shadow(2);
  }

  /* Top offset for content */

  .wrap {

    .wrap--content &:first-child {
      margin-top: $navbar-height * $gutter;

      @media screen and (min-width: bp("s")) {
        margin-top: $navbar-height-tablet * $gutter;
      }
      @media screen and (min-width: bp("m")) {
        margin-top: $navbar-height-desktop * $gutter;
      }
    }
  }

}

////////////////////////////////////////////////////////////////////////////////
// LOGO

/* SITE LOGO */

.site-logo {
  text-transform: uppercase;

  a {
    display: inline-block;
    color: $color-secondary !important;
    font-weight: 900;
    font-style: italic;

    @include v-rhythm(
      fontsize($navbar-fontsize),
      $baseline-mode: false,
      $lines: $navbar-height
    );
    margin-bottom: 0;

    @media screen and (min-width: bp("s")) {
      @include v-rhythm(
        fontsize('biggest'),
        $baseline-mode: false,
        $lines: $navbar-height-tablet
      );
      margin-bottom: 0;
    }

    @media screen and (min-width: bp("m")) {
      @include v-rhythm(
        fontsize('huge'),
        $baseline-mode: false,
        $lines: $navbar-height-desktop
      );
      margin-bottom: 0;
    }

    &:hover,
    &:active {
      color: $color-secondary-light !important;
      background-color: rgba(0,0,0,0.25) !important;
    }

    span {
      color: $color-gray-lightest;
      font-weight: 300;
    }
  }
}


////////////////////////////////////////////////////////////////////////////////
// SEARCH BAR

.search {
  @extend %cell--full;
  flex: 0 0 calc(100% + 4.8rem);

  @extend %grid;
  // @extend %grid--fit;

  margin-left: -$gutter;
  margin-right: -$gutter;
  padding-left: $gutter;
  padding-right: $gutter;

  padding-top: $gutter-half;
  padding-bottom: $gutter-half;

  @media screen and (min-width: bp("s")) {}
  @media screen and (min-width: bp("m")) {
    padding-top: $gutter;
    padding-bottom: $gutter;

    // margin-top: $gutter;
    // position: relative;
    // top: $gutter-quarter;
    // padding-top: $gutter-double;
  }

  background-color: white;

  // width: calc(100% + $gutter-double);
  width: 100vw;

  /* SEARCH ITEMS */

  > * {
    @include v-rhythm(
    fontsize($navbar-fontsize),
    $baseline-mode: false,
    $lines: 2
    );
    margin-bottom: 0;
    padding-left: $gutter-half;
    padding-right: $gutter-half;
  }

  /* SEARCH INPUT */

  > .search__input {

    color: $color-gray-darkest;
    box-shadow: inset 0 -2px 0 0 $color-gray-lighter;
    margin-right: $gutter;

    &:focus,
    &:hover {
      box-shadow: inset 0 -2px 0 0 $color-primary;
    }

    @media screen and (min-width: bp("s")) {
    }

    // reset inputs
    border: none;
    width: 0;

    @extend %cell--fill;
    // background-color: $color-gray-lightest;
    background-color: transparent;

  }

  /* SEARCH LABEL */

  > .search__label {
    display: none;
    @media screen and (min-width: bp("m")) { display: block; }

    padding-right: $gutter;
    margin-left: -$gutter-half;

    font-style: italic;
    text-transform: uppercase;
    color: $color-gray;
  }

  /* SEARCH SUBMIT */

  > .search__submit {
    background-color: $color-secondary;

    color: rgba(255, 255, 255, 0.5);
    &:hover { color: white; }
  }

  /* SEARCH CLOSE */

  > .search__close {
    display: none;

    @media screen and (min-width: bp("s")) {
      display: block;
    }
  }
}

////////////////////////////////////////////////////////////////////////////////
// Rhythm tester
// TODO: houston we still have an issue on bigger fontsizes

.rhythm-tester {
  @include v-rhythm(200);
  background-color: rgba(0,127,0,0.25);
  text-transform: uppercase;

  span {
    display: inline-block;
    background-color: rgba(255, 0, 0, 0.125);
  }
}
